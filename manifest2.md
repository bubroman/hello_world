# **Манифест архитектурного репозитория DocHub**  
**Версия 1.0**  
**Подход: "Архитектура как код" (Architecture as Code, AaC)**  

## **1. Цель и принципы**  
DocHub — это централизованный репозиторий архитектурных артефактов, обеспечивающий:  
- **Единый источник истины** для архитектуры веб-проектов.  
- **Автоматизированную проверку** и генерацию документации.  
- **Сквозную трассируемость** от требований до реализации.  
- **Коллаборацию** между командами через код.  

**Основные принципы:**  
✔ **Архитектура как код** – все артефакты (диаграммы, решения, модели) описываются в машиночитаемом формате.  
✔ **Идемпотентность** – генерация документации и диаграмм должна быть воспроизводимой.  
✔ **Минимализм** – только необходимые артефакты, без избыточности.  
✔ **Версионирование** – изменения в архитектуре фиксируются через Git.  
✔ **Автоматизация** – CI/CD для валидации и публикации изменений.  

---

## **2. Структура репозитория**  
```bash
dochub/  
├── docs/                # Генерируемая документация  
├── src/  
│   ├── components/      # Описание компонентов системы (YAML/JSON)  
│   ├── decisions/       # Архитектурные решения (ADR)  
│   ├── diagrams/        # Диаграммы (PlantUML, Mermaid, Structurizr)  
│   ├── interfaces/      # API-контракты (OpenAPI, AsyncAPI)  
│   └── requirements/   # Бизнес- и технические требования  
├── templates/          # Шаблоны для генерации кода  
├── tests/               # Тесты архитектурных ограничений  
└── .github/workflows/   # CI/CD для проверки изменений  
```

---

## **3. Правила работы**  

### **3.1. Описание архитектурных артефактов**  
- **Компоненты** описываются в `YAML/JSON` (пример):  
  ```yaml
  name: "AuthService"  
  type: "microservice"  
  tech: ["Node.js", "JWT", "Redis"]  
  interfaces:  
    - "/api/auth/login (POST)"  
  dependencies: ["UserService", "Redis"]  
  ```  

- **Диаграммы** создаются в `PlantUML/Mermaid` (не PNG/JPG!).  
- **Архитектурные решения (ADR)** хранятся в `decisions/` в формате Markdown.  

### **3.2. Ветвление и версионирование**  
- Изменения в архитектуре вносятся через **Pull Request**.  
- Каждое значимое изменение требует **ADR** (Architecture Decision Record).  
- Ветки именуются: `feat/auth-service`, `fix/cache-layer`.  

### **3.3. Валидация изменений**  
- **CI/CD проверяет:**  
  - Синтаксис YAML/JSON.  
  - Связность компонентов.  
  - Соответствие шаблонам.  
- Запрещено мержить изменения с ошибками валидации.  

### **3.4. Документирование**  
- Документация генерируется автоматически из кода (`docs/`).  
- Используются:  
  - `Docusaurus` / `MkDocs` – для статической документации.  
  - `Swagger UI` – для API.  

### **3.5. Ответственность**  
- **Архитекторы** – поддерживают актуальность репозитория.  
- **Разработчики** – обновляют интерфейсы и зависимости.  
- **DevOps** – настраивают пайплайны генерации артефактов.  

---

## **4. Инструменты**  
- **Языки:** YAML, JSON, Markdown.  
- **Диаграммы:** PlantUML, Mermaid, Structurizr.  
- **CI/CD:** GitHub Actions, GitLab CI.  
- **Документация:** Docusaurus, MkDocs.  

---

## **5. Нарушения и исправления**  
- **Ошибки в описании** – автоматическая отмена сборки.  
- **Устаревшие артефакты** – задача на обновление.  
- **Несогласованные изменения** – ревью архитектора.  

---

**"Архитектура как код — это не про документы, а про управляемые изменения."**  

`#DocHub #ArchitectureAsCode #WebDevelopment`

